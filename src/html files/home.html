<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css files/home.css"></style>
    <title>Document</title>
</head>
<body>
    <div class="topnav">
        <h1>UTSAAH Hospitals</h1>
        <div class="navbar-links">
            <a class="navbar-brand" href="#">Home</a>
            <a class="navbar-brand" href="registration.html">logout</a>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Patient ID</th>
                <th>Name</th>
                <th>Last Appointment</th>
                <th>Health Condition</th>
                <th>Current Treatment</th>
            </tr>
        </thead>
        <tbody id="tbody1"></tbody>
    </table>

    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>

    <script id="MainScript">
           const firebaseConfig = {
  apiKey: "AIzaSyAmQakSc_4cMgr_SwMxVfQJDwan1XYI-Wg",
  authDomain: "fir-crud-dc099.firebaseapp.com",
  projectId: "fir-crud-dc099",
  storageBucket: "fir-crud-dc099.appspot.com",
  messagingSenderId: "621884155968",
  appId: "1:621884155968:web:dc2b1c6554990a81de57a5"
 };

        firebase.initializeApp(firebaseConfig);
        let db = firebase.firestore();

        function getPatientData(patientID) {
            db.collection("Patients").doc(patientID).get().then((doc) => {
                if (doc.exists) {
                    var patient = doc.data();
                    AddItemToTable(patient.PatientID, patient.Name, patient.LastAppointment, patient.HealthCondition, patient.CurrentTreatment);
                } else {
                    console.log("No such document!");
                }
            }).catch((error) => {
                console.log("Error getting patient data: ", error);
            });
        }

        var tbody = document.getElementById('tbody1');

        function AddItemToTable(patientID, name, lastAppointment, healthCondition, currentTreatment) {
            var trow = document.createElement('tr');
            var td1 = document.createElement('td');
            var td2 = document.createElement('td');
            var td3 = document.createElement('td');
            var td4 = document.createElement('td');
            var td5 = document.createElement('td');

            td1.innerHTML = patientID;
            td2.innerHTML = name;
            td3.innerHTML = lastAppointment;
            td4.innerHTML = healthCondition;
            td5.innerHTML = currentTreatment;

            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);
            trow.appendChild(td4);
            trow.appendChild(td5);

            tbody.appendChild(trow);
        }

        window.addEventListener('DOMContentLoaded', function() {
            document.getElementById('btnPatient1').addEventListener('click', function() {
                tbody.innerHTML = ""; 
                getPatientData("1"); 
            });

            document.getElementById('btnPatient2').addEventListener('click', function() {
                tbody.innerHTML = ""; 
                getPatientData("2"); 
            });

            document.getElementById('btnPatient3').addEventListener('click', function() {
                tbody.innerHTML = ""; 
                getPatientData("3"); 
            });

            document.getElementById('btnPatient4').addEventListener('click', function() {
                tbody.innerHTML = ""; 
                getPatientData("4"); 
            });

            document.getElementById('btnPatient5').addEventListener('click', function() {
                tbody.innerHTML = ""; 
                getPatientData("5"); 
            });
        });
    </script>
    <button id="btnPatient1">Patient 1</button>
    <button id="btnPatient2">Patient 2</button>
    <button id="btnPatient3">Patient 3</button>
    <button id="btnPatient4">Patient 4</button>
    <button id="btnPatient5">Patient 5</button>
</body>
</html>
